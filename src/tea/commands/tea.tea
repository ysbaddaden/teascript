Tea = require('../tea')
#optimist = require('optimist').argv

def main(args)
  unless args[1]
    console.error('Usage: ' + args[0] + ' <file>')
    return
  end

  fs   = require('fs')
  path = require('path')
  src  = fs.readFileSync(path.join(process.cwd(), args[1]), 'utf8')

  dest = Tea.compile(src, amd: args[2] == '--amd', scoped: args[2] == '--scope')
  console.log(dest)
end

main(process.argv.slice(1))

